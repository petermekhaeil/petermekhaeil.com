query CommittedDate($name: String = "til", $owner: String = "petermekhaeil", $path: String) @netlify(id: """bf6a0187-9d02-4f29-8975-904c66874bf4""", doc: """Get committed date of path from repository.""") {
  gitHub {
    repository(owner: $owner, name: $name) {
      ref(qualifiedName: "refs/heads/master") {
        target {
          ... on GitHubCommit {
            history(first: 1, path: $path) {
              edges {
                node {
                  committedDate
                }
              }
            }
          }
        }
      }
    }
  }
}

query RepoFiles($name: String = "til", $owner: String = "petermekhaeil") @netlify(id: """05b3b55e-da5e-4154-b1c5-0909b2a3addc""", doc: """Return list of TIL files.""") {
  gitHub {
    repository(owner: $owner, name: $name) {
      object(expression: "HEAD:") {
        ... on GitHubTree {
          id
          entries {
            name
            type
            object {
              ... on GitHubTree {
                id
                entries {
                  name
                  type
                  object {
                    ... on GitHubBlob {
                      id
                      text
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
