<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    {% include 'seo.njk' %}
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸš€</text></svg>"/>
    <link rel="stylesheet" href="{{ '/styles.css' | url }}"/>
    <link href="https://unpkg.com/prism-theme-night-owl@1.4.0/build/no-italics.css" rel="stylesheet"/>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body class="dark:bg-gray-800 dark:text-gray-200 antialiased text-gray-900 px-4 py-6 max-w-3xl mx-auto sm:px-6 sm:py-6 lg:max-w-4xl lg:py-6 lg:px-6 xl:max-w-6xl">

    <header class="pt-0 pb-6 border-b border-gray-200 dark:border-gray-700 dark:text-blue-300">
      <div class="container px-4 mx-auto flex flex-wrap justify-between items-center">
        <h1 class="text-2xl md:text-4xl lg:text-5xl font-semibold"><a href="{{ '/' | url }}">{{ metadata.title }}</a></h1>
        <nav class="mt-2 sm:mt-0">
          {% set navPages = collections.all | eleventyNavigation %}
          <ul class="flex items-center">
          {%- for entry in navPages %}
            <li class="mr-6 text-md lg:text-2xl {% if entry.url == page.url %} font-semibold underline {% endif %}">
              <a href="{{ entry.url | url }}">{{ entry.title }}</a>
            </li>
          {%- endfor %}
            <li class="mr-6">
              <a href="https://github.com/petermekhaeil" title="GitHub" target="_blank" rel="me noopener">
                <span class="sr-only">Connect with Peter on GitHub</span>
                {% include 'icon-github.njk' %}
              </a>
            </li>
            <li class="mr-6">
              <a href="https://twitter.com/PMekhaeil" title="Twitter" target="_blank" rel="me noopener">
                <span class="sr-only">Connect with Peter on Twitter</span>
                {% include 'icon-twitter.njk' %}
              </a>
            </li>
            <li class="mr-6">
              <!-- https://heroicons.com/ -->
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="sm:h-6 sm:w-6 h-4 w-4 hidden cursor-pointer" id="toggle-light">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="sm:h-6 sm:w-6 h-4 w-4 hidden cursor-pointer" id="toggle-dark">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
              </svg>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      {{ content | safe }}
    </main>

    <footer></footer>

    {% if env.environment == "production" %}
      <img src="/.netlify/functions/tracker" alt="" />
    {% endif %}

    <script>
     (function () {
        var theme = localStorage.getItem("theme");
        var userPrefersDark = window.matchMedia("(prefers-color-scheme: dark)");
        var toggleDark = document.getElementById("toggle-dark");
        var toggleLight = document.getElementById("toggle-light");
        var htmlElem = document.querySelector('html');

        if (theme === "dark" || (!theme && userPrefersDark.matches)) {
          htmlElem.classList.add("dark");
          toggleDark.classList.add("visible");
          toggleLight.classList.remove("hidden");
        } else {
          toggleLight.classList.add("visible");
          toggleDark.classList.remove("hidden");
        }

        toggleLight.addEventListener("click", function () {
          localStorage.setItem("theme", "light");
          htmlElem.classList.remove("dark");
          toggleDark.classList.add("visible");
          toggleDark.classList.remove("hidden");
          toggleLight.classList.add("hidden");
          toggleLight.classList.remove("visible");
        });

        toggleDark.addEventListener("click", function () {
          localStorage.setItem("theme", "dark");
          htmlElem.classList.add("dark");
          toggleLight.classList.add("visible");
          toggleLight.classList.remove("hidden");
          toggleDark.classList.add("hidden");
          toggleDark.classList.remove("visible");
        });
      })();
    </script>
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>